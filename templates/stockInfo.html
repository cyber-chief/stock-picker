<html>
<title>Stock Picker v1</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/static/styles.css">
<script src="/static/gauge.js" defer></script>
<h1>Rule 1 Stock Picker</h1>

<form action="/stockInfo" method="post">
    <label for="ticker">Enter Stock Ticker</label>
    <br>
    <input type="text" name="stock" id="stock"><br>
    <input type="submit" value=Submit>
</form>

<h3>Stock Data for {{ticker}}</h3>

   <div class="dashboard">
            <!-- P/B Ratio Gauge -->
            <div class="gauge-container">
                <h2>P/B Ratio</h2>
                <div class="gauge">
                    <div class="needle" id="pb-needle"></div>
                </div>
                <p class="gauge-value" id="pb-value">P/B Ratio: {{ pb_ratio if pb_ratio is not none else '0' }}</p>
            </div>

            <!-- P/S Ratio Gauge -->
            <div class="gauge-container">
                <h2>P/S Ratio</h2>
                <div class="gauge">
                    <div class="needle" id="ps-needle"></div>
                </div>
                <p class="gauge-value" id="ps-value">P/S Ratio: {{ ps_ratio if ps_ratio is not none else '0' }}</p>
            </div>

            <!-- P/E Ratio Gauge -->
            <div class="gauge-container">
                <h2>P/E Ratio</h2>
                <div class="gauge">
                    <div class="needle" id="pe-needle"></div>
                </div>
                <p class="gauge-value" id="pe-value">P/E Ratio: {{ pe_ratio if pe_ratio is not none else '0' }}</p>
            </div>
        </div>
    
    </div>

    <h1>3-Year Growth Rates</h1>
     <!-- EPS Growth Table -->
    <table>
        <thead>
            <tr>
                <th>EPS Growth</th>
                <th>YTD</th>
                <th>2Yrs</th>
                <th>3Yrs</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="metric">EPS Growth</td>
                <td class="{{ 'positive' if eps_growth[0] > 10 else 'yellow' if 5 <= eps_growth[0] <= 10 else 'negative' }}">{{ eps_growth[0] }}%</td>
                <td class="{{ 'positive' if eps_growth[1] > 10 else 'yellow' if 5 <= eps_growth[1] <= 10 else 'negative' }}">{{ eps_growth[1] }}%</td>
                <td class="{{ 'positive' if eps_growth[2] > 10 else 'yellow' if 5 <= eps_growth[2] <= 10 else 'negative' }}">{{ eps_growth[2] }}%</td>
            </tr>
        </tbody>
    </table>

    <!-- Revenue Growth Table -->
    <table>
        <thead>
            <tr>
                <th>Revenue Growth</th>
                <th>YTD</th>
                <th>2Yrs</th>
                <th>3Yrs</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="metric">Revenue Growth</td>
                <td class="{{ 'positive' if revenue_growth[0] > 10 else 'yellow' if 5 <= revenue_growth[0] <= 10 else 'negative' }}">{{ revenue_growth[0] }}%</td>
                <td class="{{ 'positive' if revenue_growth[1] > 10 else 'yellow' if 5 <= revenue_growth[1] <= 10 else 'negative' }}">{{ revenue_growth[1] }}%</td>
                <td class="{{ 'positive' if revenue_growth[2] > 10 else 'yellow' if 5 <= revenue_growth[2] <= 10 else 'negative' }}">{{ revenue_growth[2] }}%</td>
            </tr>
        </tbody>
    </table>

    <!-- Equity Growth Table -->
    <table>
        <thead>
            <tr>
                <th>Equity Growth</th>
                <th>YTD</th>
                <th>2Yrs</th>
                <th>3Yrs</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="metric">Equity Growth</td>
                <td class="{{ 'positive' if equity_growth[0] > 10 else 'yellow' if 5 <= equity_growth[0] <= 10 else 'negative' }}">{{ equity_growth[0] }}%</td>
                <td class="{{ 'positive' if equity_growth[1] > 10 else 'yellow' if 5 <= equity_growth[1] <= 10 else 'negative' }}">{{ equity_growth[1] }}%</td>
                <td class="{{ 'positive' if equity_growth[2] > 10 else 'yellow' if 5 <= equity_growth[2] <= 10 else 'negative' }}">{{ equity_growth[2] }}%</td>
            </tr>
        </tbody>
    </table>

    <!-- Free Cash Flow Growth Table -->
    <table>
        <thead>
            <tr>
                <th>Free Cash Flow Growth</th>
                <th>YTD</th>
                <th>2Yrs</th>
                <th>3Yrs</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="metric">Free Cash Flow Growth</td>
                <td class="{{ 'positive' if fcf_growth[0] > 10 else 'yellow' if 5 <= fcf_growth[0] <= 10 else 'negative' }}">{{ fcf_growth[0] }}%</td>
                <td class="{{ 'positive' if fcf_growth[1] > 10 else 'yellow' if 5 <= fcf_growth[1] <= 10 else 'negative' }}">{{ fcf_growth[1] }}%</td>
                <td class="{{ 'positive' if fcf_growth[2] > 10 else 'yellow' if 5 <= fcf_growth[2] <= 10 else 'negative' }}">{{ fcf_growth[2] }}%</td>
            </tr>
        </tbody>
    </table>

</body>

    <script>
        // Wait for DOM to load before initializing the gauges
        document.addEventListener("DOMContentLoaded", () => {
            // Update gauges with backend values passed into Jinja templates
            {% if pe_ratio is not none %}
            updateGauge({{ pe_ratio }}, 0, 30, "pe-needle", "pe-value");
            {% endif %}

            {% if ps_ratio is not none %}
            updateGauge({{ ps_ratio }}, 0, 10, "ps-needle", "ps-value");
            {% endif %}

            {% if pb_ratio is not none %}
            updateGauge({{ pb_ratio }}, 0, 5, "pb-needle", "pb-value");
            {% endif %}
        });
    </script>


<table>
    <tr></tr>
</table>


</html>